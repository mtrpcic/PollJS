!function(t,e){"use strict";"function"==typeof define&&define.amd?define("poll",[],function(){return e()}):"object"==typeof exports?module.exports=e():t.Poll=e()}(this,function(){"use strict";var t={version:"0.3.1",start:function(e){if(e.internalAction=e.action,e.action=function(){t.util.attempts(e.name,e.internalAction)},e.start)t.timers[e.name]=e.interval?e.increment?{type:"timeout",config:e,attempts:0,value:setTimeout(function(){t.util.timeout(e.name,e.action,e.interval)},e.start)}:{type:"timeout",config:e,attempts:0,value:setTimeout(function(){e.action(),t.timers[e.name].value=setInterval(e.action,e.interval),t.timers[e.name].type="interval"},e.start)}:{type:"timeout",config:e,attempts:0,value:setTimeout(e.action,e.start)};else{if(!e.interval)throw"PollJS: You need to define a start, an interval, or both.";t.timers[e.name]=e.increment?{type:"interval",config:e,attempts:0,value:setTimeout(function(){t.util.timeout(e.name,e.action,e.interval+e.increment)},e.interval)}:{type:"interval",config:e,attempts:0,value:setInterval(e.action,e.interval)}}},util:{attempts:function(e,i){var n,a=t.timers[e];t.timers[e].attempts+=1,n=i(),n===!1&&t.stop(e),a.config.attempts&&a.attempts===a.config.attempts&&(t.stop(e),a.config.fallback())},timeout:function(e,i,n){var a,o=t.timers[e].config;a=n+(o.increment||0),t.timers[e].value=setTimeout(function(){t.util.timeout(o.name,i,a)},a),t.timers[e].type="timeout",i()}},stop:function(e){var i=t.timers[e];"interval"===i.type?clearInterval(i.value):clearTimeout(i.value)},timers:{}};return t});